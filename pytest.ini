[pytest]
DJANGO_SETTINGS_MODULE = rentals_project.settings
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Desactivar migraciones autom√°ticas (tablas ya existen desde SQL)
django_find_project = false

addopts = 
    --reuse-db
    --nomigrations
    --verbose
    --strict-markers
    --ignore=venv
    --ignore=.venv
    --ignore=env
    --ignore=documentation
    --ignore=media
    --ignore=static
    --ignore=staticfiles
    -p no:warnings
    --maxfail=1
    --cov-report=html
    --cov-report=term-missing:skip-covered
    --cov-report=xml
    --cov-fail-under=85
    --ignore=venv
    --ignore=.venv
    --ignore=env
    --ignore=documentation
    --ignore=media
    --ignore=static
    --ignore=staticfiles
    -p no:warnings
    --reuse-db
    --maxfail=1

markers =
    unit: Unit tests for models and utilities
    integration: Integration tests for views and flows
    e2e: End-to-end tests with browser
    slow: Tests that take more than 1 second
    critical: Critical tests that must pass
    django_db: Tests that require database
    admin: Tests for Django admin
    permissions: Tests for permissions and roles
    reports: Tests for report system
    listings: Tests for listings functionality
    reviews: Tests for reviews and ratings
    comments: Tests for comments
    photos: Tests for photo uploads
    
testpaths = tests

filterwarnings =
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning
    ignore:.*django.conf.urls.url.*:DeprecationWarning

# Timeout for slow tests
timeout = 30

# Randomize test order to detect dependencies
random_order = True
random_order_bucket = module
